require=function e(t,o,n){function c(i,a){if(!o[i]){if(!t[i]){var r="function"==typeof require&&require;if(!a&&r)return r(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[i]={exports:{}};t[i][0].call(d.exports,function(e){var o=t[i][1][e];return c(o?o:e)},d,d.exports,e,t,o,n)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)c(n[i]);return c}({bulletCollisionHandler:[function(e,t,o){"use strict";cc._RFpush(t,"db6c9OD4P5IsoJJJb+SYrPC","bulletCollisionHandler");e("normal");cc.Class({"extends":cc.Component,properties:{_mouseDir:cc.Vec2,_pickAble:!1,_forceSpeedSystem:null,_normalVec2:[]},onLoad:function(){this._forceSpeedSystem=this.getComponent("forceSpeedSystem")},goYou:function(e){this._mouseDir=e,this._forceSpeedSystem._accelerateVec2.addSelf(this._mouseDir)},move:function(){},freeze:function(){this._forceSpeedSystem._accelerateVec2=cc.v2(0,0),this._forceSpeedSystem._speedVec2=cc.v2(0,0)},onCollisionEnter:function(e,t){switch(e.node.name){case"wall_up":case"wall_down":case"wall_left":case"wall_right":case"test":this.onReboundStart(e,t);break;case"player":this.onPick(e)}},onCollisionExit:function(e,t){switch(e.node.name){case"wall_up":case"wall_down":case"wall_left":case"wall_right":case"test":this.onReboundExit(e,t)}},onReboundStart:function(e,t){this.freeze(),this._pickAble=!0},onReboundExit:function(e,t){},onPick:function(e){this._pickAble&&(e.node.scale+=.05,this._pickAble=!1,this.node.removeFromParent(),cc.pool.putInPool(this.node.getComponent("bulletCollisionHandler")))}}),cc._RFpop()},{normal:"normal"}],debugDrawHandler:[function(e,t,o){"use strict";cc._RFpush(t,"fb241DafgZO4blfO8UJTwN8","debugDrawHandler"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){var e=cc.director.getCollisionManager();e.enabled=!0,e.enabledDebugDraw=!0,e.enabeldDrawBoundingBox=!0}}),cc._RFpop()},{}],forceSpeedSystem:[function(e,t,o){"use strict";cc._RFpush(t,"7274dvZjy9MLKFF2JzS46V/","forceSpeedSystem"),cc.Class({"extends":cc.Component,properties:{_accelerateVec2:cc.v2(0,0),_speedVec2:cc.v2(0,0),accelerateUnit:10,maxSpeed:5},onLoad:function(){},update:function(e){this._speedVec2.addSelf(cc.pMult(this._accelerateVec2,this.accelerateUnit*e)),this._speedVec2.mag()>=this.maxSpeed&&this._speedVec2.normalizeSelf().mulSelf(this.maxSpeed)},lateUpdate:function(e){this.node.position=cc.pAdd(this.node.position,this._speedVec2)}}),cc._RFpop()},{}],gateCircleHandler:[function(e,t,o){"use strict";cc._RFpush(t,"cdbc9AaMGlGDpXwIf1xmhz3","gateCircleHandler"),cc.Class({"extends":cc.Component,properties:{_mouseDown:!1,_childList:[],_selectedItem:null},onLoad:function(){this._childList=this.node.children;var e=this;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(t){if(2===t.getButton()){e._mouseDown=!0;var o=e.node.parent.convertToNodeSpaceAR(t.getLocation());e.node.position=o,e.node.scale=1}},onMouseMove:function(t){if(e._mouseDown){var o=e.node.convertToNodeSpaceAR(t.getLocation()),n=o.mag();if(n>64){var c=void 0;for(c=0;c<e._childList.length;c++){var s=e._childList[c],i=s.position.angle(o);if(i<=Math.PI/5){e._selectedItem=s;break}}e.node.emit("selectedItem",{name:e._selectedItem.name})}}},onMouseUp:function(t){e._mouseDown=!1,e.node.scale=0}},e.node)}}),cc._RFpop()},{}],gateCircleItemUI:[function(e,t,o){"use strict";cc._RFpush(t,"3deb265A8RHf4v8uzhuxlA7","gateCircleItemUI"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.node.opacity=140,this.node.parent.on("selectedItem",function(e){var t=e.detail.name;this.node.name===t?this.node.scale=1.2:this.node.scale=1},this),this.node.parent.on("picked",function(e){var t=e.detail.picked;t?this.node.opacity=255:this.node.opacity=140},this)}}),cc._RFpop()},{}],moveWithAutoStop:[function(e,t,o){"use strict";cc._RFpush(t,"bb375Inp8FBPLwSR+tlleBb","moveWithAutoStop"),cc.Class({"extends":cc.Component,properties:{_pressCode:0,_horizontalSpeed:0,_verticalSpeed:0,accelerateUnit:10,maxSpeed:5},onLoad:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,o){switch(t){case cc.KEY.a:e._pressCode=8|e._pressCode;break;case cc.KEY.d:e._pressCode=4|e._pressCode;break;case cc.KEY.w:e._pressCode=2|e._pressCode;break;case cc.KEY.s:e._pressCode=1|e._pressCode}console.log("press")},onKeyReleased:function(t,o){switch(t){case cc.KEY.a:e._pressCode=-9&e._pressCode;break;case cc.KEY.d:e._pressCode=-5&e._pressCode;break;case cc.KEY.w:e._pressCode=-3&e._pressCode;break;case cc.KEY.s:e._pressCode=-2&e._pressCode}console.log("release")}},e.node)}}),cc._RFpop()},{}],move:[function(e,t,o){"use strict";cc._RFpush(t,"b653eBmzb9M2KJifNOhKdkl","move"),cc.Class({"extends":cc.Component,properties:{_left:!1,_right:!1,_up:!1,_down:!1,_horizontalSpeed:0,_verticalSpeed:0,_forceSpeedSystem:null},onLoad:function(){this._forceSpeedSystem=this.getComponent("forceSpeedSystem");var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,o){switch(t){case cc.KEY.a:e._left||(e._left=!0,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(-1,0)));break;case cc.KEY.d:e._right||(e._right=!0,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(1,0)));break;case cc.KEY.w:e._up||(e._up=!0,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(0,1)));break;case cc.KEY.s:e._down||(e._down=!0,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(0,-1)))}},onKeyReleased:function(t,o){switch(t){case cc.KEY.a:e._left=!1,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(1,0));break;case cc.KEY.d:e._right=!1,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(-1,0));break;case cc.KEY.w:e._up=!1,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(0,-1));break;case cc.KEY.s:e._down=!1,e._forceSpeedSystem._accelerateVec2.addSelf(cc.v2(0,1))}}},e.node)}}),cc._RFpop()},{}],normal:[function(e,t,o){"use strict";cc._RFpush(t,"01096kNfXlGlInEWFAHqb/o","normal"),t.exports={getNormalVec2:function(e,t,o){for(var n=t.world,c=n.position,s=e.world.points,i=0,a=s.length;a>i;i++){var r=0===i?s[s.length-1]:s[i-1],l=s[i];if(cc.Intersection.pointLineDistance(c,r,l,!0)<(n.radius<o.mag()?o.mag():n.radius)){var d=cc.pSub(r,l),p=cc.v2(-d.y,d.x);return p.normalizeSelf(),cc.pNeg(cc.pMult(p,2*p.dot(o)))}}},getNormalNegSpeedVec2:function(e,t){return e.mulSelf(Math.abs(e.dot(t)))},getNormalNegAccelerateVec2:function(e,t){return e.dot(t)<0?e.mulSelf(Math.abs(e.dot(t))):cc.v2(0,0)}},cc._RFpop()},{}],pickGate:[function(e,t,o){"use strict";cc._RFpush(t,"25527z1I9tDr4saXFWwVRA5","pickGate"),cc.Class({"extends":cc.Component,properties:{_currentTouchGate:null,_currentPickedGate:null,_canvas:null},onLoad:function(){this._canvas=cc.find("Canvas"),this.node.on("spacePress",this.pickGate,this);var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,o){t===cc.KEY.space&&e.node.emit("spacePress")},onKeyRelease:function(){}},e.node)},onCollisionEnter:function(e,t){switch(e.node.name){case"transferGateA":case"transferGateB":this._currentTouchGate=e.node}},onCollisionExit:function(e,t){this._currentTouchGate&&e.node.name===this._currentTouchGate.name&&(this._currentTouchGate=null)},pickGate:function(){this._currentTouchGate?(this._currentPickedGate=this._currentTouchGate,this._currentPickedGate.removeFromParent()):this._currentPickedGate&&(this._currentPickedGate.parent=this._canvas,this._currentPickedGate.position=this.node.position,this._currentPickedGate=null)}}),cc._RFpop()},{}],playerCollisionHandler:[function(e,t,o){"use strict";cc._RFpush(t,"62937aVjG9C86X0cgAaD7jb","playerCollisionHandler");e("normal");cc.Class({"extends":cc.Component,properties:{_moveComponent:null,_forceSpeedSystem:null,_normalVec2:[],_isRebound:[]},onLoad:function(){this._forceSpeedSystem=this.getComponent("forceSpeedSystem")},onCollisionEnter:function(e,t){},onCollisionStay:function(e,t){},onCollisionExit:function(e,t){}}),cc._RFpop()},{normal:"normal"}],shoot:[function(e,t,o){"use strict";cc._RFpush(t,"b3450fnX1RHkLo1KuM7oTOU","shoot");var n=e("bulletCollisionHandler");cc.Class({"extends":cc.Component,properties:{bulletNode:cc.Node,_initCount:19,_mouseDown:!1,_mouseLocation:cc.Vec2,_mouseDir:cc.Vec2,_canvas:cc.Node},onLoad:function(){for(var e=0;e<this._initCount;++e){var t=cc.instantiate(this.bulletNode);t.tag=e,cc.pool.putInPool(t.getComponent("bulletCollisionHandler"))}this._canvas=cc.find("Canvas");var o=this;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(e){if(0===e.getButton()){cc.pNormalize(o.node.convertToNodeSpaceAR(e.getLocation()));o._mouseLocation=e.getLocation(),o._mouseDown=!0,o.shoot()}},onMouseUp:function(e){o._mouseDown=!1}},o.node)},shoot:function(){if(this._mouseDown&&this.node.scale>.05){this.node.scale-=.05;var e=null;e=cc.pool.hasObject(n)?cc.pool.getFromPool(n):cc.instantiate(this.bulletNode).getComponent(n),e.node.parent=this._canvas,e.node.position=this.node.position,this._mouseDir=cc.pNormalize(this.node.convertToNodeSpaceAR(this._mouseLocation)),e.goYou(this._mouseDir)}}}),cc._RFpop()},{bulletCollisionHandler:"bulletCollisionHandler"}],transferGate:[function(e,t,o){"use strict";cc._RFpush(t,"86248PbFElC6L8JJhKl+oaH","transferGate");var n=e("transferingList"),c=n.enterGateList,s=n.exitGateList;cc.Class({"extends":cc.Component,properties:{otherGate:cc.Node},onLoad:function(){},onCollisionEnter:function(e,t){switch(e.node.name){case"bulletNode":this.transferToOtherGate(e,t)}},onCollisionExit:function(e,t){switch(e.node.name){case"bulletNode":this.resumeTransferPrivilage(e,t)}},transferToOtherGate:function(e,t){void 0===c[e.node.tag]&&(c[e.node.tag]=t.node.name,s[e.node.tag]=this.otherGate.name,e.node.position=this.otherGate.position)},resumeTransferPrivilage:function(e,t){s[e.node.tag]===t.node.name&&(c[e.node.tag]=void 0)}}),cc._RFpop()},{transferingList:"transferingList"}],transferingList:[function(e,t,o){"use strict";cc._RFpush(t,"a8b00aBJ1RDFYm9nCo7g7HA","transferingList"),t.exports={exitGateList:[],enterGateList:[]},cc._RFpop()},{}],wallCollisionHandler:[function(e,t,o){"use strict";cc._RFpush(t,"f1f037Vd8xIfouVjvVlQP2q","wallCollisionHandler");var n=e("normal");cc.Class({"extends":cc.Component,properties:{_moveComponent:null,_normalVec2:[],_isRebound:[]},onLoad:function(){},onCollisionEnter:function(e,t){var o=e.getComponent("forceSpeedSystem"),c=n.getNormalVec2(t,e,o._speedVec2);o._speedVec2.addSelf(c)},onCollisionStay:function(e,t){},onCollisionExit:function(e,t){}}),cc._RFpop()},{normal:"normal"}]},{},["normal","pickGate","gateCircleItemUI","playerCollisionHandler","forceSpeedSystem","transferGate","transferingList","shoot","move","moveWithAutoStop","gateCircleHandler","bulletCollisionHandler","wallCollisionHandler","debugDrawHandler"]);